# Quick Reference - Laravel CMS

## ðŸš€ Quick Start Commands

```bash
# Install
composer install && npm install

# Setup
cp .env.example .env
php artisan key:generate
touch database/database.sqlite

# Migrate & Seed
php artisan migrate --seed

# Build & Run
npm run build
php artisan serve
```

## ðŸ” Default Login

- **URL**: http://localhost:8000/admin
- **Superadmin**: superadmin@cms.com / password
- **Admin**: admin@cms.com / password

## ðŸ“š Helper Functions

```php
// Authentication (Use Auth facade, not auth() helper)
use Illuminate\Support\Facades\Auth;
Auth::check()          // Check if authenticated
Auth::user()           // Get current user
Auth::id()             // Get current user ID
Auth::attempt()        // Login attempt
Auth::logout()         // Logout

// SEO
seo()->setTitle('Page Title')
seo()->setDescription('Description')
seo()->setKeywords('keyword1, keyword2')
seo()->renderTags()
seo()->renderSchema('Organization')

// Menu
menu('header', 'nav-class')           // Render menu
MenuHelper::getMenu('header')         // Get menu object
MenuHelper::getItems('header')        // Get menu items

// Breadcrumb
breadcrumb()->add('Home', '/')
breadcrumb()->add('Products')
breadcrumb()->render()
breadcrumb()->renderSchema()

// Settings
setting('site_name', 'Default')       // Get setting
Setting::set('key', 'value')          // Set setting

// Language
language()                             // Get current language
language('key', 'default')            // Get translation
LanguageHelper::setLanguage('en')     // Switch language
LanguageHelper::translate('key')      // Translate

// Utilities
active_route('admin.posts.*', 'active')  // Check active route
format_date($date, 'd M Y')              // Format date
truncate($text, 150)                     // Truncate text
user_avatar($user, 50)                   // Get user avatar
asset_url($path)                         // Get asset URL
```

## ðŸŽ¨ Common Blade Directives

```blade
{{-- Layouts --}}
@extends('layouts.admin')
@extends('layouts.frontend')

{{-- Sections --}}
@section('title', 'Page Title')
@section('content')
@endsection

{{-- Conditionals --}}
@if($condition)
@elseif($condition)
@else
@endif

@auth
@endauth

@guest
@endguest

{{-- Loops --}}
@foreach($items as $item)
@endforeach

@forelse($items as $item)
@empty
@endforelse

{{-- Include --}}
@include('partials.header')

{{-- CSRF --}}
@csrf
@method('PUT')
@method('DELETE')
```

## ðŸ“¡ API Endpoints

### Public Endpoints

```bash
# Posts
GET    /api/v1/posts
GET    /api/v1/posts/{slug}

# Pages
GET    /api/v1/pages
GET    /api/v1/pages/{slug}

# Categories
GET    /api/v1/categories
GET    /api/v1/categories/{slug}

# Authentication
POST   /api/v1/login
```

### Protected Endpoints (Requires Bearer Token)

```bash
# Auth
POST   /api/v1/logout
GET    /api/v1/me

# Posts
POST   /api/v1/posts
PUT    /api/v1/posts/{post}
DELETE /api/v1/posts/{post}

# Pages
POST   /api/v1/pages
PUT    /api/v1/pages/{page}
DELETE /api/v1/pages/{page}

# Media
GET    /api/v1/media
POST   /api/v1/media
DELETE /api/v1/media/{media}
```

## ðŸŽ¯ Common Routes

### Frontend
```
/                        - Homepage
/blog                    - Blog listing
/blog/{slug}             - Blog detail
/services                - Services
/services/{slug}         - Service detail
/portfolio               - Portfolio
/portfolio/{slug}        - Portfolio detail
/careers                 - Careers
/careers/{slug}          - Career detail
/contact                 - Contact
/gallery                 - Gallery
/faq                     - FAQ
/search                  - Search
/{slug}                  - Dynamic page
```

### Admin Panel
```
/admin                   - Dashboard
/admin/posts             - Posts
/admin/pages             - Pages
/admin/media             - Media
/admin/categories        - Categories
/admin/services          - Services
/admin/portfolios        - Portfolios
/admin/careers           - Careers
/admin/contacts          - Contacts
/admin/menus             - Menus
/admin/users             - Users
/admin/roles             - Roles
/admin/settings          - Settings
/admin/backup            - Backup
```

## ðŸ—ƒï¸ Database Quick Tips

```bash
# Migrate
php artisan migrate
php artisan migrate:fresh
php artisan migrate:fresh --seed

# Seed
php artisan db:seed
php artisan db:seed --class=RolePermissionSeeder

# Tinker
php artisan tinker
```

## ðŸ”§ Common Artisan Commands

```bash
# Cache
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear

# Optimize
php artisan optimize
php artisan optimize:clear

# Queue
php artisan queue:work
php artisan queue:listen

# Storage
php artisan storage:link

# Generate
php artisan make:model ModelName -m
php artisan make:controller ControllerName
php artisan make:migration create_table_name
php artisan make:seeder SeederName
```

## ðŸ“ Model Relationships

```php
// One to Many
$user->posts()              // HasMany
$post->user()               // BelongsTo

// Many to Many
$post->tags()               // BelongsToMany
$tag->posts()               // BelongsToMany

// Example Usage
$post = Post::with('user', 'category', 'tags')->find($id);
$posts = Post::published()->with('category')->paginate(10);
```

## ðŸŽ¨ Frontend Blade Variables

Available in all frontend views:

```php
$siteSettings = [
    'name' => 'Site Name',
    'tagline' => 'Site Tagline',
    'logo' => 'path/to/logo',
    'favicon' => 'path/to/favicon'
]

$socialLinks = [
    'facebook' => 'url',
    'twitter' => 'url',
    'instagram' => 'url',
    'linkedin' => 'url',
    'youtube' => 'url'
]

$contactInfo = [
    'email' => 'email@example.com',
    'phone' => '+62 xxx',
    'address' => 'Address'
]

$currentLanguage        // Current Language object
$availableLanguages     // Collection of available languages
```

## ðŸ”’ Permission Check

```php
// In Controller
use Illuminate\Support\Facades\Auth;

if (Auth::user()->hasPermission('posts.create')) {
    // allowed
}

if (Auth::user()->hasRole('admin')) {
    // allowed
}

// In Middleware (routes)
Route::middleware(['permission:posts.create'])->group(function () {
    // routes
});

Route::middleware(['role:admin'])->group(function () {
    // routes
});
```

## ðŸŽ¯ jQuery AJAX Template

```javascript
$.ajax({
    url: '/admin/posts',
    method: 'POST',
    data: $('#form').serialize(),
    success: function(response) {
        if (response.success) {
            alert(response.message);
            if (response.redirect) {
                window.location.href = response.redirect;
            }
        }
    },
    error: function(xhr) {
        if (xhr.responseJSON?.errors) {
            let errors = xhr.responseJSON.errors;
            // Handle errors
        }
    }
});
```

## ðŸ“¦ Module Structure

```
modules/my-module/
â”œâ”€â”€ module.json          # Module config
â”œâ”€â”€ routes.php           # Module routes
â”œâ”€â”€ ServiceProvider.php  # Module provider
â””â”€â”€ views/               # Module views
    â””â”€â”€ index.blade.php
```

## ðŸŽ¨ Theme Structure

```
resources/views/themes/my-theme/
â”œâ”€â”€ theme.json           # Theme config
â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ app.blade.php
â”œâ”€â”€ home.blade.php
â””â”€â”€ assets/
    â”œâ”€â”€ css/
    â””â”€â”€ js/
```

## ðŸš¨ Common Issues & Solutions

### Issue: Auth::id() returns null
**Solution**: Make sure user is authenticated, check middleware

### Issue: Class not found
**Solution**: Run `composer dump-autoload`

### Issue: View not found
**Solution**: Check view path, clear view cache with `php artisan view:clear`

### Issue: Route not found
**Solution**: Run `php artisan route:clear` and `php artisan optimize:clear`

### Issue: Permission denied
**Solution**: Check user role and permissions in database

### Issue: CSRF token mismatch
**Solution**: Make sure `@csrf` is in form, check session configuration

---

**Pro Tips:**
- Use `Auth::` facade instead of `auth()` helper for better reliability
- Always eager load relationships to avoid N+1 queries
- Use `try-catch` for database operations in service providers
- Clear cache after making configuration changes
- Use Laravel Telescope for debugging (can be installed)

