# IDE Helper Guide

## Mengatasi Intellephense "Undefined method" Error

Jika IDE Anda (VSCode dengan Intellephense) menampilkan error seperti `Undefined method 'hasRole'`, berikut solusinya:

### Solusi 1: Restart PHP Language Server

1. Buka Command Palette (Cmd/Ctrl + Shift + P)
2. Ketik "PHP: Restart"
3. Pilih "Intelephense: Restart"

### Solusi 2: Clear Intellephense Cache

1. Buka Command Palette
2. Ketik "PHP: Clear Cache"
3. Pilih "Intelephense: Clear Cache and Reload"
4. Reload VSCode

### Solusi 3: Check VSCode Settings

File `.vscode/settings.json` sudah dibuat dengan konfigurasi optimal untuk Laravel.

Settings yang penting:
```json
{
    "intelephense.diagnostics.undefinedMethods": false
}
```

Ini akan mematikan warning untuk undefined methods (karena trait methods kadang tidak terdeteksi).

### Solusi 4: Gunakan PHPDoc

Model `User` sudah dilengkapi dengan PHPDoc:

```php
/**
 * @method bool hasPermission(string|object $permission)
 * @method bool hasRole(string|Role $role)
 * @method bool hasAnyRole(array $roles)
 * @method bool hasAllRoles(array $roles)
 * @method bool isSuperadmin()
 * @method bool isAdmin()
 * @method bool isEditor()
 * @method bool isAuthor()
 * @method bool isViewer()
 * @method bool can(string $action)
 * @method bool cannot(string $action)
 */
class User extends Authenticatable
```

### Solusi 5: IDE Helper File

File `_ide_helper.php` sudah dibuat di root project. File ini memberikan hint ke IDE tentang struktur project.

**PENTING**: File ini hanya untuk IDE, JANGAN di-run atau di-include dalam code!

### Solusi 6: Install Laravel IDE Helper (Optional)

Untuk solusi yang lebih comprehensive, install package:

```bash
composer require --dev barryvdh/laravel-ide-helper
```

Kemudian generate helper files:

```bash
php artisan ide-helper:generate
php artisan ide-helper:models
php artisan ide-helper:meta
```

## Verifikasi Method Tersedia

Untuk memastikan method benar-benar ada:

```php
use Illuminate\Support\Facades\Auth;

$user = Auth::user();

// Test di tinker
php artisan tinker

>>> $user = User::first()
>>> $user->hasRole('admin')
=> true

>>> method_exists($user, 'hasRole')
=> true
```

## Trait Location

Method `hasRole()` dan `hasPermission()` berasal dari:
- **Trait**: `App\Traits\HasRoleAndPermission`
- **Used in**: `App\Models\User`

## Common IDE Issues

### Issue 1: "Undefined method"
**Cause**: IDE tidak mendeteksi trait methods
**Fix**: Restart Intelephense atau gunakan PHPDoc

### Issue 2: "Property access on null"
**Cause**: Auth::user() bisa return null
**Fix**: Selalu check null atau gunakan optional chaining

```php
// Bad
Auth::user()->hasRole('admin')

// Good
Auth::check() && Auth::user()->hasRole('admin')

// Better
optional(Auth::user())->hasRole('admin') ?? false
```

### Issue 3: Auto-completion tidak muncul
**Cause**: Cache Intellephense
**Fix**: Clear cache dan reload

## Tips

1. **Restart setelah menambah trait**: Selalu restart language server setelah menambah trait baru
2. **Gunakan PHPDoc**: Tambahkan `@method` di class untuk hint IDE
3. **Update Intellephense**: Pastikan extension up-to-date
4. **Check settings**: File `.vscode/settings.json` harus di-commit

## VSCode Extensions Recommended

- **Intelephense** (Premium recommended)
- **Laravel Blade Snippets**
- **Laravel Extra Intellisense**
- **Laravel goto view**
- **PHP Namespace Resolver**

## Disable Warning (If Needed)

Jika masih muncul warning padahal code bekerja, disable di settings:

```json
{
    "intelephense.diagnostics.undefinedMethods": false,
    "intelephense.diagnostics.undefinedProperties": false
}
```

---

## Testing Methods

Untuk memastikan semua method bekerja:

```bash
php artisan tinker
```

```php
$user = User::first();

// Test all methods
$user->hasPermission('posts.create');  // bool
$user->hasRole('admin');               // bool
$user->hasAnyRole(['admin', 'editor']); // bool
$user->hasAllRoles(['admin']);         // bool
$user->isSuperadmin();                 // bool
$user->isAdmin();                      // bool
$user->can('posts.create');            // bool
$user->cannot('posts.delete');         // bool
```

Semua method harus return boolean dan tidak error! âœ…

